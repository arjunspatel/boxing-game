<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boxing Game - Camera Motion Control</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>ðŸ¥Š Boxing Game</h1>
    <p class="subtitle">Camera-Based Motion Detection</p>
    
    <div class="game-container">
        <!-- Game Canvas -->
        <div class="game-area">
            <h2>Boxing Ring</h2>
            <canvas id="gameCanvas" width="400" height="500"></canvas>
            <div class="current-stance">Current Stance: <span id="stanceLabel">Idle</span></div>
        </div>
        
        <!-- Camera Feed -->
        <div class="camera-section">
            <h2>Camera Feed</h2>
            <div class="camera-container">
                <video id="cameraFeed" playsinline autoplay muted></video>
                <canvas id="cameraOverlay"></canvas>
                
                <!-- Grid overlay for visual feedback -->
                <div class="grid-overlay">
                    <div class="grid-cell-overlay" data-index="0">Top Left</div>
                    <div class="grid-cell-overlay" data-index="1">Top Right</div>
                    <div class="grid-cell-overlay" data-index="2">Mid Left</div>
                    <div class="grid-cell-overlay" data-index="3">Mid Right</div>
                    <div class="grid-cell-overlay" data-index="4">Bot Left</div>
                    <div class="grid-cell-overlay" data-index="5">Bot Right</div>
                </div>
                
                <!-- Loading overlay -->
                <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Loading MediaPipe...</div>
                </div>
            </div>
            
            <p class="camera-status" id="cameraStatus">Loading...</p>
            <button class="start-btn" id="startBtn" disabled>Start Camera</button>
            
            <!-- Detection Info -->
            <div class="detection-info">
                <h4>Hand Detection</h4>
                <div class="hand-position">
                    <div class="hand-indicator left"></div>
                    <span>Left Hand: <span id="leftHandPos">Not detected</span></span>
                </div>
                <div class="hand-position">
                    <div class="hand-indicator right"></div>
                    <span>Right Hand: <span id="rightHandPos">Not detected</span></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Instructions -->
    <div class="instructions">
        <h3>How to Play</h3>
        <ul>
            <li><span class="key-highlight">Both hands up (top row)</span> â†’ Guard position</li>
            <li><span class="key-highlight">Left hand up only</span> â†’ Left Jab punch</li>
            <li><span class="key-highlight">Right hand up only</span> â†’ Right Jab punch</li>
            <li><span class="key-highlight">Left hand middle-left</span> â†’ Left Hook</li>
            <li><span class="key-highlight">Right hand middle-right</span> â†’ Right Hook</li>
            <li><span class="key-highlight">Both hands middle</span> â†’ Block Body</li>
            <li><span class="key-highlight">Both hands bottom</span> â†’ Duck</li>
            <li><span class="key-highlight">No hands detected</span> â†’ Idle stance</li>
        </ul>
        <p><strong>Tips:</strong> Stand about 2-3 feet from your camera. Make sure your hands are visible. 
        The game detects your hand positions in a 2x3 grid (left/right columns, top/middle/bottom rows).</p>
    </div>

    <!-- MediaPipe Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    
    <!-- Game Scripts -->
    <script src="game.js"></script>
    <script src="camera.js"></script>
    
    <script>
        // Initialize game and camera detection
        document.addEventListener('DOMContentLoaded', async () => {
            // Initialize the boxing game
            BoxingGame.init('gameCanvas');
            
            // Initialize camera detection
            await CameraDetection.init();
        });
    </script>
</body>
</html>
